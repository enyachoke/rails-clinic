<div class="panel panel-warning">
  <div class="panel-heading">
    <div class="panel-title pull-left"><%= t("exams.diags.diags.edit_diag")%> ID: <%= patient_diag.id %></div>
    <div class="panel-title pull-right">
      <a href="#"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="panel-body">

<% if patient_diag.errors.any? %>
  <div id="error_explanation" class="alert alert-danger">
    <strong><%= t("error.cannot_save") %></strong>
    <ul>
      <% patient_diag.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_for exam, url: update_patient_diag_path(exam), method: :patch, remote: true,
  html: { class: "form-horizontal" }  do |exam_form| %>
  <%= exam_form.fields_for :patient_diags, patient_diag do |pd_form| %>
    <div class="form-group">
      <%= pd_form.label :diag_id, class: "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= pd_form.select :diag_id, 
          options_for_select(@diags.map{ |d| [d.name, d.id, {'data-subtext'=> d.description}] }, pd_form.object.diag_id), {},
          class: "selectpicker form-control", data: { 'live-search' => true } %>
      </div>
    </div>
    <div class="form-group">
      <%= pd_form.label :note, class: "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= pd_form.text_field :note, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <div class="checkbox col-sm-10 col-sm-offset-2">
        <label><%= pd_form.check_box :_destroy %> <strong>Destroy ?</strong></label>
      </div>
    </div>
  <% end %>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <%= exam_form.submit 'Update', class: "btn btn-warning",
        data: { "disable-with" => "Saving..."} %>
    </div>
  </div>
<% end %>

  </div>
</div>